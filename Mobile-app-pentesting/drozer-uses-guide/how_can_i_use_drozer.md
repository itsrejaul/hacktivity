### DROZER USE BEGINNER GUIDE

**Credits:**

**Rejaul Islam**  
_Security enthusiast_

............................................

You can downlaod **[drozer](https://github.com/ReversecLabs/drozer-agent/releases)** agent from here.

## Download drozer in your machine

```
pip3 install drozer
```

---

# Quick start (once agent + forwarding is done)

```
# 1) Install and run the drozer agent on the device (if not already)
adb install drozer-agent.apk

# 2) Forward the device port to the host
adb forward tcp:31415 tcp:31415

# 3) Launch the drozer console and connect
drozer console connect
```

## Utility commands

- `ls` — list available modules.
- `help <module>` — show usage information for a module.
- `shell` — open an agent shell on the device (if supported).
- `run <module> --help` — show module-specific options.

---

## 1) Attack-surface / manifest enumeration

**Purpose:** Enumerate exported components and quick misconfiguration indicators from the manifest.

```
run app.package.attacksurface <package.name>
run app.package.info -a <package.name>
```

**Example:**

```
run app.package.attacksurface infosecadventures.allsafe
```

---

## 2) Activities — discovery & invocation

**Purpose:** Find exported activities and attempt to start them (test for intent injection / auth bypass).

```
run app.activity.info -a <package.name>
run app.activity.start --component <package.name> <full.activity.name>
```

**Example:**

```
run app.activity.start --component infosecadventures.allsafe infosecadventures.allsafe.SomeActivity
```

---

## 3) Services — discovery, start/bind and test

**Purpose:** Inspect exported services, start them with crafted Intents, or bind if supported.

```
run app.service.info -a <package.name>

# Start a service with action and extras
run app.service.start --component <package.name>/<ServiceClass> --action <ACTION> --es <key> <value>
```

If bind/call modules are present, use them to perform RPC-like calls.

---

## 4) Broadcast receivers — discovery & sending intents

**Purpose:** Discover exported receivers and send broadcast Intents to test behavior.

```
run app.broadcast.info -a <package.name>

run app.broadcast.send --action <ACTION> --data <data> --component <package>/<ReceiverClass>
```

---

## 5) Content Providers — enumerate, query, insert, test injection

**Purpose:** Check provider exposure and attempt to read/write data or test for SQL/command injection.

```
run app.provider.info -a <package.name>

# Query a provider
run app.provider.query --uri content://<authority>/<path>

# Automated provider injection scanner (if available)
run scanner.provider.injection <package.name>
run scanner.sql.injection <package.name>    # if module exists
```

---

## 6) URI / file exposure scans

**Purpose:** Discover content URIs and exposed file access points for the package.

```
run scanner.uris.for.package <package.name>
run scanner.uris.find <package.name>
```

---

## 7) Automated scanners for exported components

**Purpose:** Run quick automated checks for common misconfigurations on components.

```
run scanner.exported.activity <package.name>
run scanner.exported.receiver <package.name>
run scanner.exported.service <package.name>
# Summary:
run app.package.attacksurface <package.name>
```

---

## 8) File system & permission checks (device context)

**Purpose:** Inspect app file permissions and potentially world-readable files from within the agent shell.

```
shell
# within shell:
ls -l /data/data/<package.name>/
# check SharedPreferences, DBs, files with world-readable permissions
```

---

## 9) Exploitation helpers — programmatic interaction

**Purpose:** Send crafted data to components, attempt content inserts/deletes, and trigger side effects.

```
# Start a service with multiple extras
run app.service.start --component <pkg>/<Service> --action <ACTION> --es foo bar --ei num 123

# Start an activity with extras
run app.activity.start --component <pkg> <Activity> --es username alice

# Provider write / delete (if allowed)
run app.provider.insert --uri content://... --data 'field=value'
run app.provider.delete --uri content://...
```

---

## 10) Useful meta commands

- `run app.package.list` — list installed packages.
- `run scanner.permission.find` — check common permission misconfigurations (if module exists).
- `run shell` — drop into an agent shell for device-level inspection.

---

## Recommended PoC / evidence collection workflow

1. `run app.package.attacksurface <pkg>` — save the output (exported list).
2. For each exported component: `run ...info -a <pkg>` and save outputs.
3. Use `run app.service.start` / `run app.activity.start` / `run app.provider.query` to trigger functionality and capture behaviors.
4. Collect drozer console logs and `adb logcat` output (screenshot + terminal log) for report attachments.

---

## Notes, limitations & cautions

- Module names/options vary by drozer version — always run `ls` and `run <module> --help`.
- Modern Android versions (SELinux, scoped storage, tightened permissions) may block some attacks.
- Obfuscation affects class names, but exported components are declared in the manifest and remain discoverable.
- Only test systems within your authorized scope; unauthorized testing is illegal/unethical.

--- THE END ---
