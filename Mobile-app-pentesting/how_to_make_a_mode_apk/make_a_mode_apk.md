**Title: Creating a Modified (Mod) APK – Step-by-Step Guide using**

**Credits:**

**Rejaul Islam**  
_Security enthusiast_

............................................

### Target: InsecureBankV2.apk <hr>

### **Objective**

This guide explains how to decompile, modify, rebuild, sign, and align an Android application (APK) using common reverse engineering tools. For demonstration, we will use the **InsecureBankV2.apk** application.

---

### **Required Tools**

Before starting, make sure the following tools are installed on your system and properly configured in your PATH environment:

- **apktool** – Used for decompiling and recompiling APK files.
- **keytool** – Used to generate a digital signing key.
- **jarsigner** – Used to sign the modified APK.
- **zipalign** – Used to optimize and align the final APK for installation.

**Note:** You must run all commands as a **root user** (or with sudo privileges) to avoid permission issues.

---

### **Step 1: Prepare the Environment**

1. Download your target APK file **[InsecureBankV2.apk](https://github.com/dineshshetty/Android-InsecureBankv2)**.
2. Place it in a directory of your choice for easy access (for example, Desktop or Downloads or others).
3. Open a terminal and navigate to that directory.

---

### **Step 2: Decompile the APK**

Use **apktool** to decompile the APK into editable resources.

```
apktool d InsecureBankV2.apk
```

This command creates a folder named **InsecureBankV2/** that contains all the app’s resources, manifest, and smali code.

---

### **Step 3: Modify Application Resources**

1. Go to the following directory:

   ```
   InsecureBankV2/res/values/strings.xml
   ```

2. Open **strings.xml** using any text editor.
3. Find the line:

   ```
   <string name="is_admin">no</string>
   ```

4. Change it to:

   ```
   <string name="is_admin">yes</string>
   ```

5. Save the file.
   You can make other modifications as needed.

---

### **Step 4: Rebuild the APK**

After editing, recompile the application back into APK format using apktool.

```
apktool b InsecureBankV2
```

This will generate a new APK file inside the **dist** folder:

```
InsecureBankV2/dist/InsecureBankV2.apk
```

---

### **Step 5: Generate a Signing Key**

Before signing the APK, you need to generate a keystore (digital signature file).
Run the following command:

```
keytool -genkey -v -keystore mode.insecurebank -alias modeinsecurebank -keyalg RSA -keysize 2048 -validity 20000
```

**Explanation of Flags:**

- **-genkey** → Generates a new key pair.
- **-v** → Enables verbose output (shows details).
- **-keystore** → Specifies the name of your keystore file (mode.insecurebank).
- **-alias** → The alias name for the key entry.
- **-keyalg** → Algorithm type (RSA is standard).
- **-keysize** → The size of the key in bits.
- **-validity** → Validity period in days (20000 = ~54 years).

Follow the prompts to enter your details (name, organization, password, etc.).

---

### **Step 6: Sign the APK**

Now sign your rebuilt APK with the generated key using **jarsigner**:

```
jarsigner -verbose -sigalg SHA1withRSA -digestalg SHA1 -keystore mode.insecurebank InsecureBankV2/dist/InsecureBankV2.apk modeinsecurebank
```

**Explanation of Flags:**

- **-verbose** → Displays detailed information while signing.
- **-sigalg** → Specifies the signature algorithm (SHA1withRSA).
- **-digestalg** → Specifies the digest algorithm (SHA1).
- **-keystore** → Specifies the keystore file created earlier.
- **modeinsecurebank** → Alias used when generating the key.

---

### **Step 7: Verify the Signature**

Ensure the APK is properly signed by running:

```
jarsigner -verify -verbose -certs InsecureBankV2/dist/InsecureBankV2.apk
```

If there are **no errors**, it means the APK is successfully signed.

---

### **Step 8: Optimize the APK**

To finalize your modified APK, use **zipalign** for optimization:

```
zipalign -v 4 InsecureBankV2/dist/InsecureBankV2.apk InsecureBank_Mode.apk
```

**Explanation of Flags:**

- **-v** → Verbose output.
- **4** → Memory alignment in bytes (4-byte alignment is standard).
- The first path is the input APK, and the second is the output (final) APK name.

---

### **Step 9: Install and Test**

Install the **InsecureBank_Mode.apk** on your physical or virtual Android device (such as Genymotion or Android Studio emulator) and observe the changes.
For example, in this case, a new button (create user) show into UI.

---

### **Conclusion**

You have successfully created and signed a modified APK.
This process demonstrates how to:

- Decompile an Android application.
- Modify its resources or configuration.
- Rebuild and re-sign the modified APK.
- Verify and optimize the final version.

You can use the same steps to customize other APKs for testing and learning purposes.

**Note:** This process is strictly for **educational and testing purposes only**. Do not modify or distribute applications without proper authorization.

--- THE END ---
